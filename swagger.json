{"openapi":"3.0.0","paths":{"/":{"post":{"operationId":"AppController_uploadMultipleFiles","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"images":{"type":"array","items":{"type":"string","format":"binary"}}}}}}},"responses":{"201":{"description":""}},"tags":["App"]}},"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"},"examples":{"valid":{"summary":"Valid Register Data","description":"Example for valid register data","value":{"fullName":"Ahmed Ali","email":"ahmedali@gmail.com","phoneNumber":"+970597762307","password":"StrongPass123"}},"invalidFormat":{"summary":"Invalid Format Register Data","description":"Example for invalid register data format","value":{"fullName":"1Ahmed Ali","email":"ahmedaligmail.com","phoneNumber":"+97059776230","password":"123"}},"invalidEmailExist":{"summary":"User with this Email already exist","description":"Example for user with existing email already registered","value":{"fullName":"Ahmed Ali","email":"ahmedali@gmail.com","phoneNumber":"+970597762301","password":"StrongPass123"}},"invalidPhoneExist":{"summary":"User with this phone number already exist","description":"Example for user with existing phone number already registered","value":{"fullName":"Ahmed Ali","email":"ahmed@gmail.com","phoneNumber":"+970597762307","password":"StrongPass123"}},"emptyObject":{"summary":"Empty Object","description":"Example for empty object","value":{}}}}}},"responses":{"201":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":201},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/RegisterResponseDto"}}},"examples":{"otpSentTrue":{"summary":"OTP Sent Successfully","description":"The user is registered and an OTP has been sent to their email/phone.","value":{"success":true,"statusCode":201,"path":"/auth/register","timestamp":"2026-01-25T07:05:07.682Z","message":"Created successfully","data":{"token":"eyJhbGciOiJIUzI1Ni...","user":{"id":"1024","fullName":"Ahmed Ali","email":"ahmedali@gmail.com","phoneNumber":"+970597762307","role":"buyer","isEmailVerified":false,"isPhoneVerified":false,"isIdentityVerified":false,"lastLogin":null},"otpSent":"Code sent successfully"}}},"otpSentFalse":{"summary":"Created successfully, OTP Fallback","description":"The user is registered but the OTP failed to send. User is advised to resend code.","value":{"success":true,"statusCode":201,"path":"/auth/register","timestamp":"2026-01-25T07:05:07.682Z","message":"Created successfully","data":{"token":"eyJhbGciOiJIUzI1Ni...","user":{"id":"1024","fullName":"Ahmed Ali","email":"ahmedali@gmail.com","phoneNumber":"+970597762307","role":"buyer","isEmailVerified":false,"isPhoneVerified":false,"isIdentityVerified":false,"lastLogin":null},"otpSent":"Registration successful! Please click Resend Code to receive your verification code"}}}}}},"description":""},"400":{"description":"Empty request body","content":{"application/json":{"examples":{"emptyObject":{"summary":"Empty Object","value":{"success":false,"statusCode":400,"path":"/auth/register","timestamp":"2026-01-27T15:35:00.000Z","message":"Please provide the email, phoneNumber, password and fullName fields"}},"invalidFormats":{"summary":"Invalid Formats","value":{"success":false,"statusCode":400,"path":"/auth/register","timestamp":"2026-01-27T15:36:00.000Z","message":"Validation failed","fields":[{"field":"fullName","message":"fullName should only contain letters, spaces, or hyphens"},{"field":"Email","message":"email must be a valid email"},{"field":"Phone","message":"Phone number must be a valid international number (e.g., +970*********)"},{"field":"Password","message":"Password must include uppercase, lowercase letters and a number"},{"field":"Password","message":"password must be longer than or equal to 8 characters"}]}}}}}},"409":{"description":"Account Conflict Errors","content":{"application/json":{"examples":{"emailConflict":{"summary":"Email Already Exists","description":"The email provided is already linked to another account.","value":{"success":false,"statusCode":409,"path":"/auth/register","timestamp":"2026-01-25T07:10:00.000Z","message":"Unique constraint failed on fields: (email)"}},"phoneConflict":{"summary":"Phone Already Exists","description":"The phone number provided is already linked to another account.","value":{"success":false,"statusCode":409,"path":"/auth/register","timestamp":"2026-01-25T07:11:00.000Z","message":"Unique constraint failed on fields: (phoneNumber)"}}}}}}},"summary":"Register a new user","tags":["Authentication"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"},"examples":{"AdminUsingEmail":{"summary":"Valid Login Data with email and password As Admin","description":"Example for valid login data with email and password","value":{"email":"admin@marketplace.com","password":"Admin123"}},"SellerUsingEmail":{"summary":"Valid Login Data with email and password As Seller","description":"Example for valid login data with email and password","value":{"email":"seller@example.com","password":"Seller123"}},"BuyerUsingEmail":{"summary":"Valid Login Data with email and password As Buyer","description":"Example for valid login data with email and password","value":{"email":"buyer@example.com","password":"Buyer123"}},"validUsingPhone":{"summary":"Valid Login Data with phone number and password","description":"Example for valid login data with phone number and password","value":{"phoneNumber":"+970597762307","password":"StrongPass123"}},"invalidEmailFormat":{"summary":"Invalid Email format","description":"Example for invalid email format","value":{"email":"ahmedaligmail.com","password":"StrongPass123"}},"invalidPhoneFormat":{"summary":"Invalid Phone format","description":"Example for invalid phone format","value":{"phoneNumber":"970597762307","password":"StrongPass123"}},"invalidPasswordFormat":{"summary":"Invalid password format","description":"Example for invalid password format","value":{"phoneNumber":"+970597762307","password":"strongpass123"}},"notFoundEmail":{"summary":"Wrong credential email not found","description":"Example for Wrong credential email not found","value":{"email":"a@gmail.com","password":"StrongPass123"}},"notFoundPhone":{"summary":"Wrong credential phone number not found","description":"Example for Wrong credential phone number not found","value":{"phoneNumber":"+970597762300","password":"StrongPass123"}},"wrongPassword":{"summary":"Wrong credential using passwrod","description":"Example for Wrong credential using password","value":{"email":"ahmedali@gmail.com","password":"AhemdAli123"}},"bothProvided":{"summary":"Both email and phone number are provided","description":"Example for Both email and phone number are provided case","value":{"email":"ahmedali@gmail.com","phoneNumber":"+970597762307","password":"StrongPass123"}},"emptyObject":{"summary":"Empty Object","description":"Example for empty object","value":{}}}}}},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/LoginResponseDto"}}},"examples":{"loginByEmail":{"summary":"Login by email","description":"The user is logged in successfully.","value":{"success":true,"statusCode":200,"path":"/auth/login","timestamp":"2026-01-25T07:05:07.682Z","message":"Login successful","data":{"token":"eyJhbGciOiJIUzI1Ni...","user":{"id":"7","email":"ahmedali@gmail.com","phoneNumber":"+970597762307","role":"buyer","fullName":"Ahmed Ali","isEmailVerified":false,"isPhoneVerified":false,"isIdentityVerified":false,"lastLogin":"2026-01-25T07:36:55.166Z"}}}},"loginByPhone":{"summary":"Login by phone number","description":"The user is logged in successfully.","value":{"success":true,"statusCode":200,"path":"/auth/login","timestamp":"2026-01-25T07:05:07.682Z","message":"Login successful","data":{"token":"eyJhbGciOiJIUzI1Ni...","user":{"id":"7","email":"ahmedali@gmail.com","phoneNumber":"+970597762307","role":"buyer","fullName":"Ahmed Ali","isEmailVerified":false,"isPhoneVerified":false,"isIdentityVerified":false,"lastLogin":"2026-01-25T07:36:55.166Z"}}}}}}},"description":""},"400":{"description":"Validation Failures","content":{"application/json":{"examples":{"bothProvided":{"summary":"Both Email and Phone provided","description":"The XOR constraint failed because both identifiers were sent.","value":{"success":false,"statusCode":400,"path":"/auth/login","timestamp":"2026-01-25T08:00:00.000Z","message":"provide either email or phoneNumber, but not both."}},"emptyObject":{"summary":"Empty Object","description":"The request body is empty.","value":{"success":false,"statusCode":400,"path":"/auth/login","timestamp":"2026-01-25T08:00:00.000Z","message":"provide either email or phoneNumber and the password."}},"invalidEmailFormat":{"summary":"Invalid Email Format","value":{"success":false,"statusCode":400,"path":"/auth/login","timestamp":"2026-01-27T14:52:00.000Z","message":"Please provide a valid email address"}},"invalidPhoneFormat":{"summary":"Invalid Phone Format","value":{"success":false,"statusCode":400,"path":"/auth/login","timestamp":"2026-01-27T14:53:00.000Z","message":"Phone number must be a valid international number (e.g., +970*********)"}},"invalidPasswordFormat":{"summary":"Invalid Password Format","value":{"success":false,"statusCode":400,"path":"/auth/login","timestamp":"2026-01-27T14:54:00.000Z","message":"Password must include uppercase, lowercase letters and a number"}}}}}},"401":{"description":"Authentication Failures","content":{"application/json":{"examples":{"invalidCredentialsWithNotExistingEmail":{"summary":"Invalid Credentials with not existing email","description":"The user is not found.","value":{"success":false,"statusCode":401,"path":"/auth/login","timestamp":"2026-01-25T09:00:00.000Z","message":"Wtong credentials, Invalid email or password"}},"invalidCredentialsWithNotExistingPhone":{"summary":"Invalid Credentials with not existing phone","description":"The user is not found.","value":{"success":false,"statusCode":401,"path":"/auth/login","timestamp":"2026-01-25T09:00:00.000Z","message":"Wtong credentials, Invalid phone or password"}},"invalidCredentialsWithWrongPassword":{"summary":"Invalid Credentials with wrong password","description":"The password is wrong.","value":{"success":false,"statusCode":401,"path":"/auth/login","timestamp":"2026-01-25T09:00:00.000Z","message":"Wtong credentials, Invalid email or password"}}}}}}},"summary":"Login with email or phone number","tags":["Authentication"]}},"/auth/send-verification-code":{"post":{"operationId":"AuthController_sendVerificationCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendVerificationCodeDto"},"examples":{"verifyEmail":{"summary":"Send code by Email","value":{"otpType":"email_verification"}},"verifyPhoneNumber":{"summary":"Send code by Phone Number","value":{"otpType":"phone_verification"}},"emptyObject":{"summary":"Empty Object","value":{}}}}}},"responses":{"200":{"description":"Verification code sent successfully","content":{"application/json":{"schema":{"example":{"success":true,"statusCode":200,"path":"/auth/send-verification-code","timestamp":"2026-01-26T17:24:36.535Z","message":"Success","data":"code sent successfully"}}}}},"400":{"description":"Error: Bad Request","content":{"application/json":{"examples":{"emptyObjectBadRequest":{"summary":"Empty Object Bad Request","value":{"success":false,"statusCode":400,"path":"/auth/send-verification-code","timestamp":"2026-01-25T08:02:00.000Z","message":"Validation failed","fields":[{"field":"otpType","message":"otpType must be either email_verification or phone_verification"}]}},"wait60Seconds":{"summary":"Wait 60 Seconds","value":{"timestamp":"2026-01-28T08:42:51.067Z","success":false,"statusCode":400,"path":"/auth/send-verification-code","message":"Please wait 60 seconds before requesting a new code."}}}}}},"401":{"description":"Error: Unauthorized","content":{"application/json":{"examples":{"UnauthorizedException":{"summary":"User is Unauthorized","value":{"success":false,"statusCode":401,"path":"/auth/send-verification-code","timestamp":"2026-01-26T11:12:44.000Z","message":"Unauthorized"}}}}}}},"security":[{"bearer":[]}],"summary":"Resend OTP verification code (email or phone number)","tags":["Authentication"]}},"/auth/send-reset-password-code":{"post":{"operationId":"AuthController_sendResetPasswordCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendResetPasswordCodeDto"},"examples":{"resetPasswordUsingEmail":{"summary":"Reset Password Using Email","value":{"email":"ahmedali@gmail.com"}},"resetPasswordUsingNotExistingEmail":{"summary":"Reset Password Using Not Existing Email","value":{"email":"ahmed@gmail.com"}},"resetPasswordWrongEmail":{"summary":"Reset Password Using Wrong Email","value":{"email":"ahmedaligmail.com"}},"resetPasswordUsingPhoneNumber":{"summary":"Reset Password Using Phone Number","value":{"phoneNumber":"+970597762307"}},"resetPasswordUsingNotExistingPhoneNumber":{"summary":"Reset Password Using Not Existing Phone Number","value":{"phoneNumber":"+970597762308"}},"resetPasswordWrongPhoneNumber":{"summary":"Reset Password Using Wrong Phone Number","value":{"phoneNumber":"+97059776230"}},"resetPasswordBothProvided":{"summary":"Reset Password Using Both Email and Phone Number","value":{"email":"ahmedali@gmail.com","phoneNumber":"+970597762307"}}}}}},"responses":{"200":{"description":"Reset password code sent successfully","content":{"application/json":{"schema":{"example":{"success":true,"statusCode":200,"path":"/auth/send-reset-password-code","timestamp":"2026-01-26T17:24:36.535Z","message":"Success","data":"code sent successfully"}}}}},"400":{"description":"Error: Bad Request","content":{"application/json":{"examples":{"invalidEmail":{"summary":"Email Format Validation","value":{"success":false,"statusCode":400,"path":"/auth/send-reset-password-code","timestamp":"2026-01-26T17:24:36.535Z","message":"Validation failed","fields":[{"field":"email","message":"email must be a valid email"}]}},"invalidPhoneNumber":{"summary":"Phone Number Format Validation","value":{"success":false,"statusCode":400,"path":"/auth/send-reset-password-code","timestamp":"2026-01-26T17:24:36.535Z","message":"Validation failed","fields":[{"field":"phoneNumber","message":"Phone number must be a valid international number (e.g., +970*********)"}]}},"bothEmailAndPhoneNotProvided":{"summary":"Both Email and Phone Number Not Provided","value":{"timestamp":"2026-01-26T18:16:43.148Z","success":false,"statusCode":400,"path":"/auth/send-reset-password-code","message":"Provide either email or phone number, but not both.","fields":[]}},"wait60Seconds":{"summary":"Wait 60 Seconds","value":{"timestamp":"2026-01-28T08:42:51.067Z","success":false,"statusCode":400,"path":"/auth/send-reset-password-code","message":"Please wait 60 seconds before requesting a new code."}}}}}},"404":{"description":"Error: Not Found","content":{"application/json":{"examples":{"userNotFound":{"summary":"User Not Found","value":{"timestamp":"2026-01-26T18:16:43.148Z","success":false,"statusCode":404,"path":"/auth/send-reset-password-code","message":"User not found"}}}}}}},"summary":"Resend OTP reset password code by email or phone number","tags":["Authentication"]}},"/auth/verify-code":{"post":{"operationId":"AuthController_verifyCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyCodeDto"},"examples":{"emailVerification":{"summary":"Verify Email","value":{"code":"0000","email":"ahmedali@gmail.com","type":"email_verification"}},"phoneVerification":{"summary":"Verify Phone Number","value":{"code":"0000","phoneNumber":"+970597762307","type":"phone_verification"}},"resetPasswordUsingEmail":{"summary":"Reset Password Using Email","value":{"code":"0000","email":"ahmedali@gmail.com","type":"password_reset"}},"resetPasswordUsingPhoneNumber":{"summary":"Reset Password Using Phone Number","value":{"code":"0000","phoneNumber":"+970597762307","type":"password_reset"}},"wrongLengthCode":{"summary":"Wrong Length Code","value":{"code":"000","email":"ahmedali@gmail.com","type":"email_verification"}},"wrongCode":{"summary":"Wrong Code","value":{"code":"1111","email":"ahmedali@gmail.com","type":"email_verification"}},"bothEmailAndPhoneNumberProvided":{"summary":"Both Email and Phone Number Provided","value":{"code":"0000","email":"ahmedali@gmail.com","phoneNumber":"+970597762307","type":"email_verification"}},"bothMissing":{"summary":"Both Email and Phone Number Missing","value":{"code":"0000","type":"email_verification"}}}}}},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/VerifyCodeResponseDto"}}},"examples":{"verifyEmailSuccess":{"summary":"Email verified successfully","description":"The code has been verified for the email and the user status updated.","value":{"success":true,"statusCode":200,"path":"/auth/verify-code","timestamp":"2026-01-27T14:20:00.000Z","message":"Success","data":{"message":"Verification successful","email":"ahmedali@gmail.com","type":"email_verification"}}},"verifyPhoneNumberSuccess":{"summary":"Phone number verified successfully","description":"The code has been verified for the phone number and the user status updated.","value":{"success":true,"statusCode":200,"path":"/auth/verify-code","timestamp":"2026-01-27T14:20:00.000Z","message":"Success","data":{"message":"Verification successful","phoneNumber":"+970597762307","type":"phone_verification"}}},"verifyPasswordResetSuccess":{"summary":"Password reset code verified successfully by email","description":"The code has been verified for the password reset and the user status updated.","value":{"success":true,"statusCode":200,"path":"/auth/verify-code","timestamp":"2026-01-27T14:20:00.000Z","message":"Success","data":{"message":"Verification successful","email":"ahmedali@gmail.com","type":"password_reset"}}},"verifyPasswordResetUsingPhoneNumberSuccess":{"summary":"Password reset code verified successfully by phone number","description":"The code has been verified for the password reset and the user status updated.","value":{"success":true,"statusCode":200,"path":"/auth/verify-code","timestamp":"2026-01-27T14:20:00.000Z","message":"Success","data":{"message":"Verification successful","phoneNumber":"+970597762307","type":"password_reset"}}}}}},"description":""},"400":{"description":"Error: Bad Request","content":{"application/json":{"examples":{"codeMustBe4Digits":{"summary":"Code Must Be 4 Digits","value":{"timestamp":"2026-01-28T08:37:06.770Z","success":false,"statusCode":400,"path":"/auth/verify-code","message":"Code must be 4 digits"}},"noActiveCodeFound":{"summary":"No Active Code Found","value":{"timestamp":"2026-01-28T08:35:14.458Z","success":false,"statusCode":400,"path":"/auth/verify-code","message":"No active code found"}},"invalidCode":{"summary":"Invalid Code","value":{"success":false,"statusCode":400,"path":"/auth/verify-code","timestamp":"2026-01-27T14:21:00.000Z","message":"Invalid code"}},"expiredCode":{"summary":"Expired Code","value":{"success":false,"statusCode":400,"path":"/auth/verify-code","timestamp":"2026-01-27T14:22:00.000Z","message":"Code expired"}},"missingIdentifiers":{"summary":"Missing both Email and Phone Number","value":{"success":false,"statusCode":400,"path":"/auth/verify-code","timestamp":"2026-01-28T10:30:00.000Z","message":"Please provide a valid email or phone number"}},"bothProvided":{"summary":"Both Email and Phone Number provided","value":{"success":false,"statusCode":400,"path":"/auth/verify-code","timestamp":"2026-01-28T10:31:00.000Z","message":"provide either email or phoneNumber, but not both."}},"tooManyAttempts":{"summary":"Too Many Attempts","value":{"timestamp":"2026-01-28T08:52:58.252Z","success":false,"statusCode":400,"path":"/auth/verify-code","message":"Too many attempts. Request a new code."}}}}}}},"summary":"Verify OTP code to verify email or phone number","tags":["Authentication"]}},"/auth/reset-password":{"post":{"operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"},"examples":{"validResetPassword":{"summary":"Valid Reset Password Request","description":"Example request with matching new passwords","value":{"newPassword":"NewStrongPass123","confirmPassword":"NewStrongPass123"}},"passwordMismatch":{"summary":"Password Mismatch","description":"Example request where passwords do not match","value":{"newPassword":"NewStrongPass123","confirmPassword":"DifferentPass456"}},"weakPassword":{"summary":"Weak Password","description":"Example request with a password that does not meet requirements","value":{"newPassword":"weak","confirmPassword":"weak"}},"emptyObject":{"summary":"Empty Object","description":"Example for empty object","value":{}}}}}},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ResetPasswordResponseDto"}}},"examples":{"passwordReset":{"summary":"Password Reset Successfully","description":"The user password has been updated.","value":{"success":true,"statusCode":200,"path":"/auth/reset-password","timestamp":"2026-01-28T11:30:00.000Z","message":"Success","data":{"message":"Password reset successfully"}}}}}},"description":""},"400":{"description":"Validation Failures","content":{"application/json":{"examples":{"emptyObject":{"summary":"Empty Object","value":{"success":false,"statusCode":400,"path":"/auth/reset-password","timestamp":"2026-01-28T11:31:00.000Z","message":"Please provide newPassword and confirmPassword fields"}},"passwordMismatch":{"summary":"Passwords Do Not Match","value":{"success":false,"statusCode":400,"path":"/auth/reset-password","timestamp":"2026-01-28T11:32:00.000Z","message":"Passwords do not match"}},"weakPassword":{"summary":"Password Does Not Meet Requirements","value":{"success":false,"statusCode":400,"path":"/auth/reset-password","timestamp":"2026-01-28T11:33:00.000Z","message":"Validation failed","fields":[{"field":"newPassword","message":"Password must include uppercase, lowercase letters and a number"},{"field":"newPassword","message":"newPassword must be longer than or equal to 8 characters"}]}}}}}},"401":{"description":"Token Expired or Invalid","content":{"application/json":{"examples":{"tokenExpired":{"summary":"Token Expired or Invalid","value":{"success":false,"statusCode":401,"path":"/auth/reset-password","timestamp":"2026-01-28T11:34:00.000Z","message":"Unauthorized"}}}}}}},"security":[{"bearer":[]}],"summary":"Reset user password using token from password reset verification","tags":["Authentication"]}},"/countries":{"get":{"operationId":"CountriesController_findAllActive","parameters":[{"name":"name","required":false,"in":"query","description":"Search by English or Arabic name","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CountryResponseDto"}}},"examples":{"listFound":{"summary":"List Retrieved Successfully","value":{"success":true,"statusCode":200,"message":"Retrieved successfully","data":[{"id":"cm2w...","nameEn":"Egypt","nameAr":"مصر","isoCode":"EG","currency":"EGP","isActive":true,"cities":[{"id":"1","nameEn":"Cairo","nameAr":"القاهرة","latitude":30.0444,"longitude":31.2357}]},{"id":"cm2z...","nameEn":"Saudi Arabia","nameAr":"السعودية","isoCode":"SA","currency":"SAR","isActive":true,"cities":[]}]}},"emptyList":{"summary":"No Countries Found","value":{"success":true,"statusCode":200,"message":"Retrieved successfully","data":[]}}}}},"description":""},"400":{"description":"Invalid Query Parameters","content":{"application/json":{"examples":{"invalidUuid":{"summary":"Invalid UUID Format","value":{"success":false,"statusCode":400,"path":"/countries/invalid-id","message":"Validation failed (uuid must be a UUID)","error":"Bad Request"}}}}}}},"summary":"Get list of active countries with search","tags":["Public Countries"]}},"/countries/{id}":{"get":{"operationId":"CountriesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CountryResponseDto"}}},"examples":{"detailsFound":{"summary":"Country Details Retrieved","value":{"success":true,"statusCode":200,"message":"Retrieved successfully","data":{"id":"cm2w...","nameEn":"Egypt","nameAr":"مصر","isoCode":"EG","currency":"EGP","isActive":true,"cities":[{"id":"c1","nameEn":"Cairo","nameAr":"القاهرة","latitude":30.0444,"longitude":31.2357},{"id":"c2","nameEn":"Alexandria","nameAr":"الإسكندرية","latitude":31.2001,"longitude":29.9187}]}}}}}},"description":""},"400":{"description":"Invalid Query Parameters","content":{"application/json":{"examples":{"invalidUuid":{"summary":"Invalid UUID Format","value":{"success":false,"statusCode":400,"path":"/countries/invalid-id","message":"Validation failed (uuid must be a UUID)","error":"Bad Request"}}}}}}},"summary":"Get a specific active country","tags":["Public Countries"]}},"/admin/countries":{"get":{"operationId":"AdminCountryController_findAll","parameters":[{"name":"name","required":false,"in":"query","description":"Search by English or Arabic name","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CountryResponseDto"}}},"examples":{"listFound":{"summary":"List Retrieved Successfully","value":{"success":true,"statusCode":200,"message":"Retrieved successfully","data":[{"id":"cm2w...","nameEn":"Egypt","nameAr":"مصر","isoCode":"EG","currency":"EGP","isActive":true,"cities":[{"id":"1","nameEn":"Cairo","nameAr":"القاهرة","latitude":30.0444,"longitude":31.2357}]},{"id":"cm2z...","nameEn":"Saudi Arabia","nameAr":"السعودية","isoCode":"SA","currency":"SAR","isActive":true,"cities":[]}]}},"emptyList":{"summary":"No Countries Found","value":{"success":true,"statusCode":200,"message":"Retrieved successfully","data":[]}}}}},"description":""},"400":{"description":"Invalid Query Parameters","content":{"application/json":{"examples":{"invalidUuid":{"summary":"Invalid UUID Format","value":{"success":false,"statusCode":400,"path":"/countries/invalid-id","message":"Validation failed (uuid must be a UUID)","error":"Bad Request"}}}}}}},"security":[{"bearer":[]}],"summary":"Get list of active countries with search","tags":["Admin - Countries"]}},"/admin/countries/{id}/status":{"patch":{"operationId":"AdminCountryController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCountryDto"},"examples":{"activateCountry":{"summary":"Activate Country","value":{"isActive":true}},"deactivateCountry":{"summary":"Deactivate Country","value":{"isActive":false}}}}}},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CountryResponseDto"}}},"examples":{"successActivation":{"summary":"Country Activated","description":"The country has been successfully activated.","value":{"success":true,"statusCode":200,"path":"/admin/countries/cm2w...","message":"Country Egypt status updated.","data":{"id":"cm2w...","nameEn":"Egypt","nameAr":"مصر","isActive":true}}}}}},"description":""},"400":{"description":"Validation failed (isActive must be boolean)","content":{"application/json":{"examples":{"invalidBoolean":{"summary":"Validation Error (Invalid Type)","value":{"success":false,"statusCode":400,"path":"/admin/countries/cm2w...","message":"Validation failed","error":"Bad Request"}}}}}},"404":{"description":"Country not found","content":{"application/json":{"examples":{"countryMissing":{"summary":"Country Not Found","value":{"success":false,"statusCode":404,"path":"/admin/countries/invalid-id","message":"Country with ID invalid-id not found","error":"Not Found"}}}}}}},"security":[{"bearer":[]}],"summary":"Update country activation status","tags":["Admin - Countries"]}},"/categories":{"get":{"operationId":"CategoryController_findAll","parameters":[{"name":"isActive","required":false,"in":"query","description":"Filter by active status","schema":{"example":true,"type":"boolean"}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Items per page","schema":{"example":10,"type":"number"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CategoryResponseDto"}}},"examples":{"Success":{"value":{"success":true,"statusCode":200,"message":"Categories retrieved successfully","data":{"data":[{"id":"1","name":"Electronics","icon":{"id":"1","url":"https://ik.imagekit.io/xxx/categories/icon.png","fileName":"icon.png","type":"category_icon","createdAt":"2024-01-20T10:00:00.000Z"},"isActive":true,"createdAt":"2024-01-20T10:00:00.000Z","updatedAt":"2024-01-20T10:00:00.000Z"},{"id":"2","name":"Laptops","icon":{"id":"2","url":"https://ik.imagekit.io/xxx/categories/laptop.png","fileName":"laptop.png","type":"category_icon","createdAt":"2024-01-20T10:05:00.000Z"},"isActive":true,"createdAt":"2024-01-20T10:05:00.000Z","updatedAt":"2024-01-20T10:05:00.000Z"}],"meta":{"total":15,"page":1,"lastPage":2}}}}}}},"description":""},"400":{"description":"Validation Error","content":{"application/json":{"examples":{"Invalid isActive":{"value":{"success":false,"statusCode":400,"message":["isActive must be a boolean value"],"error":"Bad Request"},"description":"When isActive is not a boolean (e.g. \"not-a-boolean\")"},"Invalid Pagination":{"value":{"success":false,"statusCode":400,"message":["page must be an integer number","limit must be an integer number"],"error":"Bad Request"},"description":"When page or limit are not valid integers"}}}}}},"summary":"Get all categories with active filtering","tags":["Public Categories"]}},"/categories/{id}":{"get":{"operationId":"CategoryController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CategoryResponseDto"}}},"examples":{"Success":{"value":{"success":true,"statusCode":200,"message":"Category retrieved successfully","data":{"id":"1","name":"Electronics","icon":{"id":"1","url":"https://ik.imagekit.io/xxx/categories/icon.png","fileName":"icon.png","type":"category_icon","createdAt":"2024-01-20T10:00:00.000Z"},"isActive":true,"createdAt":"2024-01-20T10:00:00.000Z","updatedAt":"2024-01-20T10:00:00.000Z","attributes":[{"id":"101","name":"Storage","type":"select","body":{"options":["64GB","128GB"]},"categoryId":"1","createdAt":"2024-01-20T10:00:00.000Z","updatedAt":"2024-01-20T10:00:00.000Z"}],"children":[{"id":"2","name":"Laptops"}]}}}}}},"description":""},"404":{"description":"Category Not Found","content":{"application/json":{"examples":{"Category Not Found":{"value":{"statusCode":404,"message":"Category with ID 1 not found","error":"Not Found"},"description":"When the category ID does not exist"}}}}}},"summary":"Get a category by ID","tags":["Public Categories"]}},"/admin/categories":{"post":{"operationId":"AdminCategoryController_create","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"Category icon image"},"body":{"type":"object","$ref":"#/components/schemas/CreateCategoryDto"}},"required":["file","body"]}}}},"responses":{"201":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":201},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CategoryResponseDto"}}},"examples":{"Success":{"value":{"success":true,"statusCode":201,"message":"Category created successfully","data":{"id":"1","name":"Electronics","icon":{"id":"1","url":"https://ik.imagekit.io/xxx/categories/icon.png","fileName":"icon.png","type":"category_icon","createdAt":"2024-01-20T10:00:00.000Z"},"isActive":true,"createdAt":"2024-01-20T10:00:00.000Z","updatedAt":"2024-01-20T10:00:00.000Z"}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"Duplicate Category Name":{"value":{"success":false,"statusCode":400,"message":"Category with this name already exists","error":"Bad Request"},"description":"When a category with the same name already exists"},"Select Missing Options":{"value":{"success":false,"statusCode":400,"message":["Select type must have an options array in body"],"error":"Bad Request"},"description":"When a select attribute is missing the options array"},"Text Invalid Body":{"value":{"success":false,"statusCode":400,"message":["Text type must have a string text key in body"],"error":"Bad Request"},"description":"When a text attribute has invalid body structure"},"Number Invalid Body":{"value":{"success":false,"statusCode":400,"message":["Number type must have a number key in body"],"error":"Bad Request"},"description":"When a number attribute has invalid body structure"},"Checkboxes Invalid Structure":{"value":{"success":false,"statusCode":400,"message":["Checkboxes type must have a checkboxes array in body"],"error":"Bad Request"},"description":"When checkboxes attribute has invalid structure"},"Checkbox Value Not Boolean":{"value":{"success":false,"statusCode":400,"message":["Checkbox value for FeatureName at index 0 must be a boolean"],"error":"Bad Request"},"description":"When checkbox item values are not booleans"},"Toggle Invalid Body":{"value":{"success":false,"statusCode":400,"message":["Toggle type must have a boolean toggle key in body"],"error":"Bad Request"},"description":"When toggle attribute has invalid body"},"Datepicker Invalid Date":{"value":{"success":false,"statusCode":400,"message":["Datepicker type must have a valid date string in body"],"error":"Bad Request"},"description":"When datepicker has invalid date format"},"Duplicate Attribute Names":{"value":{"success":false,"statusCode":400,"message":"Duplicate attribute names provided for this category","error":"Bad Request"},"description":"When two attributes have the same name"},"File Not Image":{"value":{"success":false,"statusCode":400,"message":"Only image files are allowed!","error":"Bad Request"},"description":"When the uploaded file is not an image"},"File Required":{"value":{"success":false,"statusCode":400,"message":"File is required","error":"Bad Request"},"description":"When no file is uploaded for a required file field"}}}}},"413":{"description":"File too large","content":{"application/json":{"examples":{"File Size Exceeded":{"value":{"success":false,"statusCode":413,"message":"File too large","error":"Bad Request"},"description":"When the uploaded file exceeds the size limit of 2MB"}}}}}},"security":[{"bearer":[]}],"summary":"Create a new category","tags":["Admin - Categories"]}},"/admin/categories/deactivate/{id}":{"patch":{"description":"deactivate a category means that you cant add listings to this category but you still can filter by this category in search results","operationId":"AdminCategoryController_deactivate","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CategoryMessageResponseDto"}}},"examples":{"Success":{"value":{"success":true,"statusCode":200,"message":"Category deactivated successfully","data":"Category deactivated"}}}}},"description":""},"404":{"description":"Category Not Found","content":{"application/json":{"examples":{"Category Not Found":{"value":{"statusCode":404,"message":"Category with ID 1 not found","error":"Not Found"},"description":"When the category ID does not exist"}}}}}},"security":[{"bearer":[]}],"summary":"deactivate a category","tags":["Admin - Categories"]}},"/admin/categories/activate/{id}":{"patch":{"operationId":"AdminCategoryController_activate","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CategoryMessageResponseDto"}}},"examples":{"Success":{"value":{"success":true,"statusCode":200,"message":"Category activated successfully","data":"Category activated"}}}}},"description":""},"404":{"description":"Category Not Found","content":{"application/json":{"examples":{"Category Not Found":{"value":{"statusCode":404,"message":"Category with ID 1 not found","error":"Not Found"},"description":"When the category ID does not exist"}}}}}},"security":[{"bearer":[]}],"summary":"activate a category","tags":["Admin - Categories"]}},"/products/pending":{"post":{"operationId":"ProductController_addPendingProductListing","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/CreateProductDto"},"examples":{"pendingSmartphone":{"summary":"Pending Smartphone Listing","description":"Example of a valid phone listing with attributes (Required for pending)","value":{"title":"iPhone 11 Pro Max","categoryId":"1","condition":"new","price":250.31,"isNegotiable":true,"attributes":[{"attributeId":"1","value":"Apple"},{"attributeId":"2","value":"iphone 11"},{"attributeId":"3","value":"256GB"},{"attributeId":"4","value":"98%"},{"attributeId":"5","value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift."},{"attributeId":"6","value":"Palestine, Gaza"}]}},"pendingSmartphoneWithoutAttributes":{"summary":"Pending Smartphone Listing without attributes","description":"Example of a invalid phone listing without attributes","value":{"title":"iPhone 11 Pro Max","categoryId":"1","condition":"new","price":70,"isNegotiable":true}},"draftSmartphone":{"summary":"Draft Smartphone Listing","description":"Example of a draft phone listing without attributes","value":{"title":"iPhone 15 Pro Max","categoryId":"2","condition":"new","price":102.5}},"validLaptop":{"summary":"Valid Laptop Listing","description":"Example of a valid laptop listing with attributes","value":{"title":"MacBook Air M2","categoryId":"3","condition":"like_new","price":1050,"attributes":[{"attributeId":"10","value":"16GB"},{"attributeId":"11","value":"512GB SSD"}]}},"missingTitle":{"summary":"Missing Title","description":"Example of invalid data with missing title","value":{"categoryId":"1","condition":"new","price":500}},"invalidPrice":{"summary":"Invalid Price Type","description":"Example of invalid data with price as string","value":{"title":"Broken Phone","categoryId":"1","condition":"poor","price":"too much"}}}}}},"responses":{"201":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":201},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"pendingSuccess":{"summary":"Pending Product Created","description":"The product was successfully created with pending status.","value":{"success":true,"statusCode":201,"path":"/products/pending","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"1","title":"iPhone 11 Pro Max","sellerId":"3","categoryId":"1","condition":"new","price":150.5,"status":"pending","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"3","storageProviderName":"IMAGE_KIT","fileId":"6988470a5c7cd75eb81e09e6","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p1_v_8Q3nyYf.jpg","fileName":"p1.jpg","fileSizeInKB":52,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"},{"id":"4","storageProviderName":"IMAGE_KIT","fileId":"6988470e5c7cd75eb81e1a37","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p2_CDw8efBzQ.jpg","fileName":"p2.jpg","fileSizeInKB":1792,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"}],"productAttributeValues":[{"value":"Apple","attribute":{"name":"Brand"}},{"value":"iphone 11","attribute":{"name":"Model"}},{"value":"256GB","attribute":{"name":"Storage"}},{"value":"98%","attribute":{"name":"Battery Health"}},{"value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift.","attribute":{"name":"Description"}},{"value":"Palestine, Gaza","attribute":{"name":"Location"}}]}}},"draftSuccess":{"summary":"Draft Product Created","description":"The product was successfully created as a draft.","value":{"success":true,"statusCode":201,"path":"/products/draft","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"2","title":"iPhone 15 Pro Max","sellerId":"3","categoryId":"2","condition":"new","price":102.5,"status":"draft","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"5","storageProviderName":"IMAGE_KIT","fileId":"6988470f5c7cd75eb81e2b48","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p3_EDw9fgCzR.jpg","fileName":"p3.jpg","fileSizeInKB":120,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"2"}]}}}}}},"description":""},"400":{"description":"Validation Failures","content":{"application/json":{"examples":{"emptyObject":{"summary":"Empty Object","value":{"success":false,"statusCode":400,"path":"/products/pending","timestamp":"2026-02-04T15:42:00.000Z","message":"Validation failed","fields":[{"field":"title","message":"title must be a string"},{"field":"title","message":"title should not be empty"},{"field":"categoryId","message":"categoryId should not be null or undefined"},{"field":"condition","message":"condition should not be empty"},{"field":"price","message":"price must be a number conforming to the specified constraints"},{"field":"price","message":"price should not be empty"}]}},"missingFiles":{"summary":"You should at least upload one image","value":{"timestamp":"2026-02-10T09:00:15.380Z","success":false,"statusCode":400,"path":"/products/pending","message":"At least one image is required for a product listing"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"examples":{"Forbidden":{"summary":"Forbidden Access","value":{"success":false,"statusCode":403,"path":"/products/pending","timestamp":"2026-02-04T15:49:00.000Z","message":"Forbidden resource"}}}}}},"502":{"description":"Image Upload Error","content":{"application/json":{"examples":{"imageKitError":{"summary":"ImageKit Upload Error","value":{"timestamp":"2026-02-10T09:00:15.380Z","success":false,"statusCode":502,"path":"/products/pending","message":"We couldn’t handle your image upload right now. Please try again later"}}}}}}},"security":[{"bearer":[]}],"summary":"Add a new product listing with pending status","tags":["Products"]}},"/products/draft":{"post":{"operationId":"ProductController_addDraftProductListing","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/CreateDraftProductDto"},"examples":{"draftSmartphone":{"summary":"Draft Smartphone Listing","description":"Example of a draft phone listing without attributes","value":{"title":"iPhone 15 Pro Max","categoryId":"2","condition":"new","price":102.5}}}}}},"responses":{"201":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":201},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"pendingSuccess":{"summary":"Pending Product Created","description":"The product was successfully created with pending status.","value":{"success":true,"statusCode":201,"path":"/products/pending","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"1","title":"iPhone 11 Pro Max","sellerId":"3","categoryId":"1","condition":"new","price":150.5,"status":"pending","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"3","storageProviderName":"IMAGE_KIT","fileId":"6988470a5c7cd75eb81e09e6","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p1_v_8Q3nyYf.jpg","fileName":"p1.jpg","fileSizeInKB":52,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"},{"id":"4","storageProviderName":"IMAGE_KIT","fileId":"6988470e5c7cd75eb81e1a37","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p2_CDw8efBzQ.jpg","fileName":"p2.jpg","fileSizeInKB":1792,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"}],"productAttributeValues":[{"value":"Apple","attribute":{"name":"Brand"}},{"value":"iphone 11","attribute":{"name":"Model"}},{"value":"256GB","attribute":{"name":"Storage"}},{"value":"98%","attribute":{"name":"Battery Health"}},{"value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift.","attribute":{"name":"Description"}},{"value":"Palestine, Gaza","attribute":{"name":"Location"}}]}}},"draftSuccess":{"summary":"Draft Product Created","description":"The product was successfully created as a draft.","value":{"success":true,"statusCode":201,"path":"/products/draft","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"2","title":"iPhone 15 Pro Max","sellerId":"3","categoryId":"2","condition":"new","price":102.5,"status":"draft","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"5","storageProviderName":"IMAGE_KIT","fileId":"6988470f5c7cd75eb81e2b48","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p3_EDw9fgCzR.jpg","fileName":"p3.jpg","fileSizeInKB":120,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"2"}]}}}}}},"description":""},"400":{"description":"Validation Failures","content":{"application/json":{"examples":{"emptyObject":{"summary":"Empty Object","value":{"success":false,"statusCode":400,"path":"/products/pending","timestamp":"2026-02-04T15:42:00.000Z","message":"Validation failed","fields":[{"field":"title","message":"title must be a string"},{"field":"title","message":"title should not be empty"},{"field":"categoryId","message":"categoryId should not be null or undefined"},{"field":"condition","message":"condition should not be empty"},{"field":"price","message":"price must be a number conforming to the specified constraints"},{"field":"price","message":"price should not be empty"}]}},"missingFiles":{"summary":"You should at least upload one image","value":{"timestamp":"2026-02-10T09:00:15.380Z","success":false,"statusCode":400,"path":"/products/pending","message":"At least one image is required for a product listing"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"examples":{"Forbidden":{"summary":"Forbidden Access","value":{"success":false,"statusCode":403,"path":"/products/pending","timestamp":"2026-02-04T15:49:00.000Z","message":"Forbidden resource"}}}}}},"502":{"description":"Image Upload Error","content":{"application/json":{"examples":{"imageKitError":{"summary":"ImageKit Upload Error","value":{"timestamp":"2026-02-10T09:00:15.380Z","success":false,"statusCode":502,"path":"/products/pending","message":"We couldn’t handle your image upload right now. Please try again later"}}}}}}},"security":[{"bearer":[]}],"summary":"Add a new product listing as a draft","tags":["Products"]}},"/products/my":{"get":{"operationId":"ProductController_getMyProductListing","parameters":[{"name":"status","required":false,"in":"query","schema":{"example":["active","draft"],"type":"array","items":{"type":"string","enum":["pending","draft","active","sold","removed","rejected","archived","hidden"]}}},{"name":"sortBy","required":false,"in":"query","schema":{"type":"string","enum":["id","title","sellerId","categoryId","condition","price","status","viewCount","isNegotiable","deliveryOptions","createdAt","updatedAt","countryId"]}},{"name":"sortOrder","required":false,"in":"query","schema":{"type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"limit","required":false,"in":"query","schema":{"format":"int32","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"myProducts":{"summary":"Seller's Own Product Listings","value":{"success":true,"statusCode":200,"path":"/products/my","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"1","title":"iPhone 15 Pro","sellerId":"3","categoryId":"1","condition":"new","price":999.99,"status":"pending","viewCount":5,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]},{"id":"2","title":"Draft MacBook","sellerId":"3","categoryId":"2","condition":"like_new","price":1500,"status":"draft","viewCount":0,"isNegotiable":false,"createdAt":"2026-02-07T11:00:00.000Z","updatedAt":"2026-02-07T11:00:00.000Z","category":{"id":"2","name":"Laptops"},"images":[]}],"total":2,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}},"activeProducts":{"summary":"All Active Listings (Public Browse)","value":{"success":true,"statusCode":200,"path":"/products","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"3","title":"Samsung Galaxy S23","sellerId":"3","categoryId":"1","condition":"good","price":799,"status":"active","viewCount":120,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]}],"total":1,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}},"adminProducts":{"summary":"Admin Product Listings (No Drafts)","value":{"success":true,"statusCode":200,"path":"/admin/products","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"1","title":"iPhone 15 Pro","sellerId":"3","categoryId":"1","condition":"new","price":999.99,"status":"pending","viewCount":5,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]},{"id":"3","title":"Samsung Galaxy S23","sellerId":"3","categoryId":"1","condition":"good","price":799,"status":"active","viewCount":120,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]}],"total":2,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}}}}},"description":""},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}}},"security":[{"bearer":[]}],"summary":"Get product listings for the authenticated buyer or seller","tags":["Products"]}},"/products":{"get":{"operationId":"ProductController_getAllActiveProductListing","parameters":[{"name":"sellerIds","required":false,"in":"query","schema":{"type":"array","items":{"type":"number"}}},{"name":"categoryIds","required":false,"in":"query","schema":{"type":"array","items":{"type":"number"}}},{"name":"condition","required":false,"in":"query","schema":{"example":["new","poor"],"type":"array","items":{"type":"string","enum":["new","like_new","good","fair","poor"]}}},{"name":"minPrice","required":false,"in":"query","schema":{"format":"float","type":"number"}},{"name":"maxPrice","required":false,"in":"query","schema":{"format":"float","type":"number"}},{"name":"minViews","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"maxViews","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"isNegotiable","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"minCreatedAt","required":false,"in":"query","schema":{"format":"date-time","example":"2022-01-01T00:00:00.000Z","type":"string"}},{"name":"maxCreatedAt","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"minUpdatedAt","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"maxUpdatedAt","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"sortBy","required":false,"in":"query","schema":{"type":"string","enum":["id","title","sellerId","categoryId","condition","price","status","viewCount","isNegotiable","deliveryOptions","createdAt","updatedAt","countryId"]}},{"name":"sortOrder","required":false,"in":"query","schema":{"type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"limit","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"myProducts":{"summary":"Seller's Own Product Listings","value":{"success":true,"statusCode":200,"path":"/products/my","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"1","title":"iPhone 15 Pro","sellerId":"3","categoryId":"1","condition":"new","price":999.99,"status":"pending","viewCount":5,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]},{"id":"2","title":"Draft MacBook","sellerId":"3","categoryId":"2","condition":"like_new","price":1500,"status":"draft","viewCount":0,"isNegotiable":false,"createdAt":"2026-02-07T11:00:00.000Z","updatedAt":"2026-02-07T11:00:00.000Z","category":{"id":"2","name":"Laptops"},"images":[]}],"total":2,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}},"activeProducts":{"summary":"All Active Listings (Public Browse)","value":{"success":true,"statusCode":200,"path":"/products","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"3","title":"Samsung Galaxy S23","sellerId":"3","categoryId":"1","condition":"good","price":799,"status":"active","viewCount":120,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]}],"total":1,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}},"adminProducts":{"summary":"Admin Product Listings (No Drafts)","value":{"success":true,"statusCode":200,"path":"/admin/products","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"1","title":"iPhone 15 Pro","sellerId":"3","categoryId":"1","condition":"new","price":999.99,"status":"pending","viewCount":5,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]},{"id":"3","title":"Samsung Galaxy S23","sellerId":"3","categoryId":"1","condition":"good","price":799,"status":"active","viewCount":120,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]}],"total":2,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}}}}},"description":""}},"security":[{"bearer":[]}],"summary":"Get all active product listings","tags":["Products"]}},"/products/{id}":{"get":{"operationId":"ProductController_getProductById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"success":{"summary":"Product Details","value":{"success":true,"statusCode":200,"path":"/products/1","timestamp":"2026-02-07T16:50:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","sellerId":"3","categoryId":"1","condition":"new","price":999.99,"status":"active","viewCount":5,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","countryId":null,"category":{"id":"1","name":"Smartphones","iconId":"1","parentId":null,"isActive":true,"createdAt":"2026-02-04T08:56:33.538Z","updatedAt":"2026-02-05T08:36:40.220Z","attributes":[{"id":"1","name":"Brand","type":"text","isRequired":true,"body":{"text":"Enter brand name"}}]},"seller":{"id":"3","email":"seller@example.com","fullName":"Sarah Seller","role":"seller"},"images":[],"productAttributeValues":[{"id":"1","productId":"1","attributeId":"1","value":"Apple"}]}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"Forbidden":{"summary":"Forbidden Access","value":{"success":false,"statusCode":403,"path":"/products/pending","timestamp":"2026-02-04T15:49:00.000Z","message":"Forbidden resource"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Get product by id","tags":["Products"]},"put":{"operationId":"ProductController_editProduct","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"},"examples":{"pendingSmartphone":{"summary":"Pending Smartphone Listing","description":"Example of a valid phone listing with attributes (Required for pending)","value":{"title":"iPhone 11 Pro Max","categoryId":"1","condition":"new","price":250.31,"isNegotiable":true,"attributes":[{"attributeId":"1","value":"Apple"},{"attributeId":"2","value":"iphone 11"},{"attributeId":"3","value":"256GB"},{"attributeId":"4","value":"98%"},{"attributeId":"5","value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift."},{"attributeId":"6","value":"Palestine, Gaza"}]}},"pendingSmartphoneWithoutAttributes":{"summary":"Pending Smartphone Listing without attributes","description":"Example of a invalid phone listing without attributes","value":{"title":"iPhone 11 Pro Max","categoryId":"1","condition":"new","price":70,"isNegotiable":true}},"draftSmartphone":{"summary":"Draft Smartphone Listing","description":"Example of a draft phone listing without attributes","value":{"title":"iPhone 15 Pro Max","categoryId":"2","condition":"new","price":102.5}},"validLaptop":{"summary":"Valid Laptop Listing","description":"Example of a valid laptop listing with attributes","value":{"title":"MacBook Air M2","categoryId":"3","condition":"like_new","price":1050,"attributes":[{"attributeId":"10","value":"16GB"},{"attributeId":"11","value":"512GB SSD"}]}},"missingTitle":{"summary":"Missing Title","description":"Example of invalid data with missing title","value":{"categoryId":"1","condition":"new","price":500}},"invalidPrice":{"summary":"Invalid Price Type","description":"Example of invalid data with price as string","value":{"title":"Broken Phone","categoryId":"1","condition":"poor","price":"too much"}}}}}},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"pendingSuccess":{"summary":"Pending Product Created","description":"The product was successfully created with pending status.","value":{"success":true,"statusCode":201,"path":"/products/pending","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"1","title":"iPhone 11 Pro Max","sellerId":"3","categoryId":"1","condition":"new","price":150.5,"status":"pending","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"3","storageProviderName":"IMAGE_KIT","fileId":"6988470a5c7cd75eb81e09e6","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p1_v_8Q3nyYf.jpg","fileName":"p1.jpg","fileSizeInKB":52,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"},{"id":"4","storageProviderName":"IMAGE_KIT","fileId":"6988470e5c7cd75eb81e1a37","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p2_CDw8efBzQ.jpg","fileName":"p2.jpg","fileSizeInKB":1792,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"}],"productAttributeValues":[{"value":"Apple","attribute":{"name":"Brand"}},{"value":"iphone 11","attribute":{"name":"Model"}},{"value":"256GB","attribute":{"name":"Storage"}},{"value":"98%","attribute":{"name":"Battery Health"}},{"value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift.","attribute":{"name":"Description"}},{"value":"Palestine, Gaza","attribute":{"name":"Location"}}]}}},"draftSuccess":{"summary":"Draft Product Created","description":"The product was successfully created as a draft.","value":{"success":true,"statusCode":201,"path":"/products/draft","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"2","title":"iPhone 15 Pro Max","sellerId":"3","categoryId":"2","condition":"new","price":102.5,"status":"draft","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"5","storageProviderName":"IMAGE_KIT","fileId":"6988470f5c7cd75eb81e2b48","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p3_EDw9fgCzR.jpg","fileName":"p3.jpg","fileSizeInKB":120,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"2"}]}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotEdit":{"summary":"Cannot Edit (Invalid Status)","value":{"success":false,"statusCode":400,"path":"/products/1","timestamp":"2026-02-08T12:00:00.000Z","message":"Product status sold cannot be edited to pending"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Edit a product and submit as pending (buyer or seller, from draft/active/pending/rejected)","tags":["Products"]},"delete":{"operationId":"ProductController_deleteProduct","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"removed":{"summary":"Product Removed","value":{"success":true,"statusCode":200,"path":"/products/1","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"removed"}}}}}},"description":""},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Remove a product (buyer or seller for own products, admin for any)","tags":["Products"]}},"/products/archive/{id}":{"patch":{"operationId":"ProductController_archiveProduct","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"archived":{"summary":"Product Archived","value":{"success":true,"statusCode":200,"path":"/products/1/archive","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"archived"}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotArchive":{"summary":"Cannot Archive Product","value":{"success":false,"statusCode":400,"path":"/products/1/archive","timestamp":"2026-02-08T12:00:00.000Z","message":"You can't mark this product as sold or archived"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Archive a product (buyer or seller, from active/sold status)","tags":["Products"]}},"/products/sold/{id}":{"patch":{"operationId":"ProductController_markAsSold","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"sold":{"summary":"Product Marked as Sold","value":{"success":true,"statusCode":200,"path":"/products/1/sold","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"sold"}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotMarkSold":{"summary":"Cannot Mark as Sold","value":{"success":false,"statusCode":400,"path":"/products/1/sold","timestamp":"2026-02-08T12:00:00.000Z","message":"You can't mark this product as sold or archived"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Mark a product as sold (buyer or seller, from active status)","tags":["Products"]}},"/products/republish/{id}":{"patch":{"operationId":"ProductController_republishProduct","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"republished":{"summary":"Product Republished","value":{"success":true,"statusCode":200,"path":"/products/1/republish","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"pending"}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotRepublish":{"summary":"Cannot Republish Product","value":{"success":false,"statusCode":400,"path":"/products/1/republish","timestamp":"2026-02-08T12:00:00.000Z","message":"You can't republish this product"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Republish a product (buyer or seller, from sold/archived status)","tags":["Products"]}},"/products/draft/{id}":{"put":{"operationId":"ProductController_editDraftProduct","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"},"examples":{"pendingSmartphone":{"summary":"Pending Smartphone Listing","description":"Example of a valid phone listing with attributes (Required for pending)","value":{"title":"iPhone 11 Pro Max","categoryId":"1","condition":"new","price":250.31,"isNegotiable":true,"attributes":[{"attributeId":"1","value":"Apple"},{"attributeId":"2","value":"iphone 11"},{"attributeId":"3","value":"256GB"},{"attributeId":"4","value":"98%"},{"attributeId":"5","value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift."},{"attributeId":"6","value":"Palestine, Gaza"}]}},"pendingSmartphoneWithoutAttributes":{"summary":"Pending Smartphone Listing without attributes","description":"Example of a invalid phone listing without attributes","value":{"title":"iPhone 11 Pro Max","categoryId":"1","condition":"new","price":70,"isNegotiable":true}},"draftSmartphone":{"summary":"Draft Smartphone Listing","description":"Example of a draft phone listing without attributes","value":{"title":"iPhone 15 Pro Max","categoryId":"2","condition":"new","price":102.5}},"validLaptop":{"summary":"Valid Laptop Listing","description":"Example of a valid laptop listing with attributes","value":{"title":"MacBook Air M2","categoryId":"3","condition":"like_new","price":1050,"attributes":[{"attributeId":"10","value":"16GB"},{"attributeId":"11","value":"512GB SSD"}]}},"missingTitle":{"summary":"Missing Title","description":"Example of invalid data with missing title","value":{"categoryId":"1","condition":"new","price":500}},"invalidPrice":{"summary":"Invalid Price Type","description":"Example of invalid data with price as string","value":{"title":"Broken Phone","categoryId":"1","condition":"poor","price":"too much"}}}}}},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"pendingSuccess":{"summary":"Pending Product Created","description":"The product was successfully created with pending status.","value":{"success":true,"statusCode":201,"path":"/products/pending","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"1","title":"iPhone 11 Pro Max","sellerId":"3","categoryId":"1","condition":"new","price":150.5,"status":"pending","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"3","storageProviderName":"IMAGE_KIT","fileId":"6988470a5c7cd75eb81e09e6","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p1_v_8Q3nyYf.jpg","fileName":"p1.jpg","fileSizeInKB":52,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"},{"id":"4","storageProviderName":"IMAGE_KIT","fileId":"6988470e5c7cd75eb81e1a37","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p2_CDw8efBzQ.jpg","fileName":"p2.jpg","fileSizeInKB":1792,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"1"}],"productAttributeValues":[{"value":"Apple","attribute":{"name":"Brand"}},{"value":"iphone 11","attribute":{"name":"Model"}},{"value":"256GB","attribute":{"name":"Storage"}},{"value":"98%","attribute":{"name":"Battery Health"}},{"value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift.","attribute":{"name":"Description"}},{"value":"Palestine, Gaza","attribute":{"name":"Location"}}]}}},"draftSuccess":{"summary":"Draft Product Created","description":"The product was successfully created as a draft.","value":{"success":true,"statusCode":201,"path":"/products/draft","timestamp":"2026-02-08T08:19:26.749Z","message":"Created successfully","data":{"id":"2","title":"iPhone 15 Pro Max","sellerId":"3","categoryId":"2","condition":"new","price":102.5,"status":"draft","viewCount":0,"isNegotiable":true,"deliveryOptions":null,"createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","countryId":null,"images":[{"id":"5","storageProviderName":"IMAGE_KIT","fileId":"6988470f5c7cd75eb81e2b48","type":"product_image","url":"https://ik.imagekit.io/4mwdb3xsr/products/p3_EDw9fgCzR.jpg","fileName":"p3.jpg","fileSizeInKB":120,"fileType":"image/jpeg","width":null,"height":null,"altText":null,"uploaderId":"3","createdAt":"2026-02-08T08:19:26.465Z","updatedAt":"2026-02-08T08:19:26.465Z","productId":"2"}]}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotEditDraft":{"summary":"Cannot Edit Draft (Wrong Status)","value":{"success":false,"statusCode":400,"path":"/products/draft/1","timestamp":"2026-02-08T12:00:00.000Z","message":"Only draft products can be edited via this endpoint"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Edit a draft product (buyer only)","tags":["Products"]}},"/admin/products":{"get":{"operationId":"AdminProductController_getAllProductListing","parameters":[{"name":"sellerIds","required":false,"in":"query","schema":{"type":"array","items":{"type":"number"}}},{"name":"categoryIds","required":false,"in":"query","schema":{"type":"array","items":{"type":"number"}}},{"name":"condition","required":false,"in":"query","schema":{"example":["new","poor"],"type":"array","items":{"type":"string","enum":["new","like_new","good","fair","poor"]}}},{"name":"minPrice","required":false,"in":"query","schema":{"format":"float","type":"number"}},{"name":"maxPrice","required":false,"in":"query","schema":{"format":"float","type":"number"}},{"name":"status","required":false,"in":"query","schema":{"example":["active","draft"],"type":"array","items":{"type":"string","enum":["pending","active","sold","removed"]}}},{"name":"minViews","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"maxViews","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"isNegotiable","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"minCreatedAt","required":false,"in":"query","schema":{"format":"date-time","example":"2022-01-01T00:00:00.000Z","type":"string"}},{"name":"maxCreatedAt","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"minUpdatedAt","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"maxUpdatedAt","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"sortBy","required":false,"in":"query","schema":{"type":"string","enum":["id","title","sellerId","categoryId","condition","price","status","viewCount","isNegotiable","deliveryOptions","createdAt","updatedAt","countryId"]}},{"name":"sortOrder","required":false,"in":"query","schema":{"type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"limit","required":false,"in":"query","schema":{"format":"int32","type":"integer"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"myProducts":{"summary":"Seller's Own Product Listings","value":{"success":true,"statusCode":200,"path":"/products/my","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"1","title":"iPhone 15 Pro","sellerId":"3","categoryId":"1","condition":"new","price":999.99,"status":"pending","viewCount":5,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]},{"id":"2","title":"Draft MacBook","sellerId":"3","categoryId":"2","condition":"like_new","price":1500,"status":"draft","viewCount":0,"isNegotiable":false,"createdAt":"2026-02-07T11:00:00.000Z","updatedAt":"2026-02-07T11:00:00.000Z","category":{"id":"2","name":"Laptops"},"images":[]}],"total":2,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}},"activeProducts":{"summary":"All Active Listings (Public Browse)","value":{"success":true,"statusCode":200,"path":"/products","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"3","title":"Samsung Galaxy S23","sellerId":"3","categoryId":"1","condition":"good","price":799,"status":"active","viewCount":120,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]}],"total":1,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}},"adminProducts":{"summary":"Admin Product Listings (No Drafts)","value":{"success":true,"statusCode":200,"path":"/admin/products","timestamp":"2026-02-07T16:30:00.000Z","message":"Success","data":{"data":[{"id":"1","title":"iPhone 15 Pro","sellerId":"3","categoryId":"1","condition":"new","price":999.99,"status":"pending","viewCount":5,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]},{"id":"3","title":"Samsung Galaxy S23","sellerId":"3","categoryId":"1","condition":"good","price":799,"status":"active","viewCount":120,"isNegotiable":true,"createdAt":"2026-02-07T10:00:00.000Z","updatedAt":"2026-02-07T10:00:00.000Z","category":{"id":"1","name":"Smartphones"},"images":[]}],"total":2,"page":1,"limit":10,"totalPages":1,"hasNextPage":false,"hasPrevPage":false}}}}}},"description":""},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"examples":{"Forbidden":{"summary":"Forbidden Access","value":{"success":false,"statusCode":403,"path":"/products/pending","timestamp":"2026-02-04T15:49:00.000Z","message":"Forbidden resource"}}}}}}},"security":[{"bearer":[]}],"summary":"Get all product listings (excludes drafts by default)","tags":["admin/products"]}},"/admin/products/decision/{id}":{"patch":{"operationId":"AdminProductController_adminDecision","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminDecisionDto"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"approved":{"summary":"Product Approved by Admin","value":{"success":true,"statusCode":200,"path":"/products/1/decision","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"active"}}},"rejected":{"summary":"Product Rejected by Admin","value":{"success":true,"statusCode":200,"path":"/products/1/decision","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"rejected"}}},"hidden":{"summary":"Product Hidden by Admin","value":{"success":true,"statusCode":200,"path":"/products/1/hide","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"hidden"}}},"unhidden":{"summary":"Product Unhidden by Admin","value":{"success":true,"statusCode":200,"path":"/products/1/unhide","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"active"}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotDecide":{"summary":"Cannot Make Decision (Not Pending)","value":{"success":false,"statusCode":400,"path":"/products/1/decision","timestamp":"2026-02-08T12:00:00.000Z","message":"You can't desicion on this product"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"examples":{"Forbidden":{"summary":"Forbidden Access","value":{"success":false,"statusCode":403,"path":"/products/pending","timestamp":"2026-02-04T15:49:00.000Z","message":"Forbidden resource"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Approve or reject a pending product (admin only)","tags":["admin/products"]}},"/admin/products/hide/{id}":{"patch":{"operationId":"AdminProductController_adminHideProduct","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"hidden":{"summary":"Product Hidden by Admin","value":{"success":true,"statusCode":200,"path":"/products/1/hide","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"hidden"}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotHide":{"summary":"Cannot Hide Product (Not Active)","value":{"success":false,"statusCode":400,"path":"/products/1/hide","timestamp":"2026-02-08T12:00:00.000Z","message":"You can't hide this product"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"examples":{"Forbidden":{"summary":"Forbidden Access","value":{"success":false,"statusCode":403,"path":"/products/pending","timestamp":"2026-02-04T15:49:00.000Z","message":"Forbidden resource"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Hide an active product (admin only)","tags":["admin/products"]}},"/admin/products/unhide/{id}":{"patch":{"operationId":"AdminProductController_adminUnhideProduct","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"statusCode":{"type":"number","example":200},"path":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductDTO"}}},"examples":{"unhidden":{"summary":"Product Unhidden by Admin","value":{"success":true,"statusCode":200,"path":"/products/1/unhide","timestamp":"2026-02-08T12:00:00.000Z","message":"Success","data":{"id":"1","title":"iPhone 15 Pro","status":"active"}}}}}},"description":""},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"cannotUnhide":{"summary":"Cannot Unhide Product (Not Hidden)","value":{"success":false,"statusCode":400,"path":"/products/1/unhide","timestamp":"2026-02-08T12:00:00.000Z","message":"You can't unhide this product"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"examples":{"Unauthorized":{"summary":"Unauthorized Access","value":{"success":false,"statusCode":401,"path":"/products/my","timestamp":"2026-02-04T15:48:00.000Z","message":"Unauthorized"}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"examples":{"Forbidden":{"summary":"Forbidden Access","value":{"success":false,"statusCode":403,"path":"/products/pending","timestamp":"2026-02-04T15:49:00.000Z","message":"Forbidden resource"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"examples":{"notFound":{"summary":"Product Not Found","value":{"success":false,"statusCode":404,"path":"/products/999","timestamp":"2026-02-07T16:50:00.000Z","message":"Product with ID 999 not found"}}}}}}},"security":[{"bearer":[]}],"summary":"Unhide a hidden product (admin only)","tags":["admin/products"]}},"/profile":{"patch":{"description":"Update existing profile or create new one if it does not exist. Automatically attaches to current user.","operationId":"ProfileController_updateProfile","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/UpdateProfileDto"}}}},"responses":{"200":{"description":"Profile updated/created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update user profile or create if not exists","tags":["Profile"]},"get":{"description":"Retrieve the profile of the authenticated user","operationId":"ProfileController_getProfile","parameters":[],"responses":{"200":{"description":"Profile retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get current user profile","tags":["Profile"]}},"/wishlist":{"post":{"operationId":"WishlistController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddToWishlistDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Add a product to the authenticated user's wishlist","tags":["Wishlist"]},"get":{"operationId":"WishlistController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get the wishlist of the authenticated user","tags":["Wishlist"]}},"/wishlist/{productId}":{"delete":{"operationId":"WishlistController_remove","parameters":[{"name":"productId","required":true,"in":"path","description":"The ID of the product to remove","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Remove a product from the authenticated user's wishlist","tags":["Wishlist"]}}},"info":{"title":"Second hand electronics","description":"The Second hand electronics API description","version":"1.0","contact":{}},"tags":[{"name":"Second hand electronics","description":""}],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"BaseErrorResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":false,"description":"Always false for error responses"},"statusCode":{"type":"number","description":"The HTTP status code"},"timestamp":{"type":"string","description":"ISO Timestamp of the error"},"path":{"type":"string","description":"The endpoint that was called"},"message":{"type":"string","description":"The error message or reason"}},"required":["success","statusCode","timestamp","path","message"]},"ValidationErrorField":{"type":"object","properties":{"field":{"type":"string","example":"email","description":"The field that failed validation"},"message":{"type":"string","example":"email must be a valid email","description":"The validation error message"}},"required":["field","message"]},"ValidationErrorResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":false,"description":"Always false for error responses"},"statusCode":{"type":"number","description":"The HTTP status code"},"timestamp":{"type":"string","description":"ISO Timestamp of the error"},"path":{"type":"string","description":"The endpoint that was called"},"message":{"type":"string","description":"The error message or reason"},"fields":{"example":[{"field":"fullName","message":"fullName should only contain letters, spaces, or hyphens"},{"field":"email","message":"email must be a valid email"},{"field":"phoneNumber","message":"Phone number must be a valid international number (e.g., +970*********)"},{"field":"password","message":"Password is too weak: include uppercase, lowercase, and a number"}],"type":"array","items":{"$ref":"#/components/schemas/ValidationErrorField"}}},"required":["success","statusCode","timestamp","path","message"]},"UserResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"1024"},"fullName":{"type":"string","example":"Ahmed Ali"},"email":{"type":"string","example":"ahmedali@gmail.com"},"phoneNumber":{"type":"string","example":"+970597762307"},"role":{"type":"string","example":"buyer"},"isEmailVerified":{"type":"boolean","example":true},"isPhoneVerified":{"type":"boolean","example":false},"isIdentityVerified":{"type":"boolean","example":false},"lastLogin":{"type":"object","example":"2024-01-23T15:37:17.000Z","nullable":true}},"required":["id","fullName","email","phoneNumber","role","isEmailVerified","isPhoneVerified","isIdentityVerified"]},"RegisterResponseDto":{"type":"object","properties":{"token":{"type":"string","example":"eyJhbGciOiJIUzI1Ni..."},"user":{"$ref":"#/components/schemas/UserResponseDto"},"otpSent":{"type":"string","enum":["Code sent successfully","Registration successful! Please click Resend Code to receive your verification code"],"description":"Status message indicating if the OTP was sent or if a fallback is needed"}},"required":["token","user","otpSent"]},"RegisterDto":{"type":"object","properties":{"fullName":{"type":"string","example":"Ahmed Ali"},"email":{"type":"string","example":"ahmedali@gmail.com"},"phoneNumber":{"type":"string","example":"+970597762307"},"password":{"type":"string","example":"StrongPass123","description":"Password must contain at least 8 characters, one uppercase, one lowercase, and one number"}},"required":["fullName","email","phoneNumber","password"]},"LoginResponseDto":{"type":"object","properties":{"token":{"type":"string","example":"eyJhbGciOiJIUzI1Ni..."},"user":{"$ref":"#/components/schemas/UserResponseDto"}},"required":["token","user"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"ahmedali@gmail.com"},"phoneNumber":{"type":"string","example":"+970597762307"},"password":{"type":"string","example":"StrongPass123","description":"Password must contain at least 8 characters, one uppercase letter, one lowercase letter, and one number"}},"required":["password"]},"ResendVerificationCodeDto":{"type":"object","properties":{"otpType":{"type":"string","enum":["email_verification","phone_verification"],"example":"email_verification"}},"required":["otpType"]},"ResendResetPasswordCodeDto":{"type":"object","properties":{"email":{"type":"string","example":"ahmedali@gmail.com"},"phoneNumber":{"type":"string","example":"+970597762307"}}},"VerifyCodeResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Verification successful"},"email":{"type":"string","example":"ahmedali@gmail.com"},"phoneNumber":{"type":"string","example":"+970597762307"}},"required":["message"]},"VerifyCodeDto":{"type":"object","properties":{"email":{"type":"string","example":"ahmedali@gmail.com"},"phoneNumber":{"type":"string","example":"+970597762307"},"code":{"type":"string","description":"The OTP code sent to the user","example":"0000"},"type":{"type":"string","enum":["email_verification","password_reset","phone_verification"],"example":"email_verification","description":"The type of verification being performed"}},"required":["code","type"]},"ResetPasswordResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Password reset successfully"}},"required":["message"]},"ResetPasswordDto":{"type":"object","properties":{"newPassword":{"type":"string","example":"NewStrongPass123","description":"Password must contain at least 8 characters, one uppercase, one lowercase, and one number"},"confirmPassword":{"type":"string","example":"NewStrongPass123","description":"Must match the newPassword field"}},"required":["newPassword","confirmPassword"]},"CityDto":{"type":"object","properties":{"id":{"type":"string"},"nameEn":{"type":"string"},"nameAr":{"type":"string"},"latitude":{"type":"number"},"longitude":{"type":"number"}},"required":["id","nameEn","nameAr","latitude","longitude"]},"CountryResponseDto":{"type":"object","properties":{"id":{"type":"string"},"nameEn":{"type":"string"},"nameAr":{"type":"string"},"isoCode":{"type":"string"},"currency":{"type":"string"},"isActive":{"type":"boolean"},"cities":{"type":"array","items":{"$ref":"#/components/schemas/CityDto"}}},"required":["id","nameEn","nameAr","isoCode","currency","isActive","cities"]},"UpdateCountryDto":{"type":"object","properties":{"isActive":{"type":"boolean","example":true,"description":"True to activate, False to deactivate."}},"required":["isActive"]},"AssetResponseDto":{"type":"object","properties":{"id":{"type":"string","example":1},"url":{"type":"string","example":"https://ik.imagekit.io/xxx/categories/icon.png"},"fileName":{"type":"string","example":"icon.png"},"type":{"type":"string","enum":["product_image","avatar","id_front","id_back","selfie","review_image","message_attachment","category_icon"],"example":"category_icon"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-20T10:00:00.000Z"}},"required":["id","url","fileName","type","createdAt"]},"AttributeResponseDto":{"type":"object","properties":{"id":{"type":"string","example":1},"name":{"type":"string","example":"Storage"},"type":{"type":"string","enum":["select","text","number","checkboxes","toggle","datepicker","textarea"],"example":"select"},"body":{"type":"object","example":{"options":["64GB","128GB"]}},"isRequired":{"type":"boolean","example":false},"categoryId":{"type":"string","example":1},"createdAt":{"format":"date-time","type":"string","example":"2024-01-20T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-20T10:00:00.000Z"}},"required":["id","name","type","body","isRequired","categoryId","createdAt","updatedAt"]},"CategoryResponseDto":{"type":"object","properties":{"id":{"type":"string","example":1},"name":{"type":"string","example":"Electronics"},"icon":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/AssetResponseDto"}]},"isActive":{"type":"boolean","example":true},"createdAt":{"format":"date-time","type":"string","example":"2024-01-20T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-20T10:00:00.000Z"},"attributes":{"type":"array","items":{"$ref":"#/components/schemas/AttributeResponseDto"}},"children":{"type":"array","items":{"$ref":"#/components/schemas/CategoryResponseDto"}},"parent":{"$ref":"#/components/schemas/CategoryResponseDto"}},"required":["id","name","isActive","createdAt","updatedAt"]},"CreateAttributeDto":{"type":"object","properties":{"name":{"type":"string","example":"Color"},"type":{"type":"string","enum":["select","text","number","checkboxes","toggle","datepicker","textarea"],"example":"select"},"isRequired":{"type":"boolean","example":false,"default":false},"body":{"description":"Body structure depends on the attribute type:\n        \n**select**: `{ \"options\": [\"Option1\", \"Option2\", \"Option3\"] }`\n\n**text**: `{ \"text\": \"Default text value\" }` (string or null)\n\n**number**: `{ \"number\": 100 }` (number or null)\n\n**toggle**: `{ \"toggle\": true }` (boolean or null)\n\n**datepicker**: `{ \"datepicker\": \"2024-01-20\" }` (valid date string)\n\n**textarea**: `{ \"textarea\": \"Long text content...\" }` (string or null)\n\n**checkboxes**: `{ \"checkboxes\": [{\"Leather Seats\": true}, {\"GPS\": false}] }` (array of objects with boolean values)","example":{"options":["Red","Blue","Green"]},"oneOf":[{"type":"object","properties":{"options":{"type":"array","items":{"type":"string"}}},"description":"For type: select"},{"type":"object","properties":{"text":{"type":"string","nullable":true}},"description":"For type: text"},{"type":"object","properties":{"number":{"type":"number","nullable":true}},"description":"For type: number"},{"type":"object","properties":{"toggle":{"type":"boolean","nullable":true}},"description":"For type: toggle"},{"type":"object","properties":{"datepicker":{"type":"string","format":"date"}},"description":"For type: datepicker"},{"type":"object","properties":{"textarea":{"type":"string","nullable":true}},"description":"For type: textarea"},{"type":"object","properties":{"checkboxes":{"type":"array","items":{"type":"object"}}},"description":"For type: checkboxes"}]}},"required":["name","type","body"]},"CreateCategoryDto":{"type":"object","properties":{"name":{"type":"string","example":"Electronics"},"attributes":{"type":"array","items":{"$ref":"#/components/schemas/CreateAttributeDto"}}},"required":["name"]},"CategoryMessageResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Category activated"}},"required":["message"]},"ProductCondition":{"type":"string","enum":["new","like_new","good","fair","poor"]},"ProductStatus":{"type":"string","enum":["pending","draft","active","sold","removed","rejected","archived","hidden"]},"ProductDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"condition":{"allOf":[{"$ref":"#/components/schemas/ProductCondition"}]},"price":{"type":"string","format":"Decimal.js"},"status":{"allOf":[{"$ref":"#/components/schemas/ProductStatus"}]},"viewCount":{"type":"integer","format":"int32"},"isNegotiable":{"type":"boolean"},"deliveryOptions":{"type":"object","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","title","condition","price","status","viewCount","isNegotiable","deliveryOptions","createdAt","updatedAt"]},"ProductAttributeDto":{"type":"object","properties":{"attributeId":{"format":"int64","type":"integer","example":"1","description":"The ID of the attribute definition"},"value":{"type":"string","example":"128GB","description":"The value for this attribute"}},"required":["attributeId","value"]},"CreateProductDto":{"type":"object","properties":{"title":{"type":"string","example":"iPhone 11 Pro Max"},"categoryId":{"type":"string","example":"1","description":"The ID of the category"},"condition":{"type":"string","enum":["new","like_new","good","fair","poor"],"example":"new"},"price":{"type":"number","example":150.5},"isNegotiable":{"type":"boolean","example":false},"images":{"type":"array","items":{"type":"string","format":"binary"},"description":"Product images (max 6)"},"attributes":{"example":[{"attributeId":"1","value":"Apple"},{"attributeId":"2","value":"iphone 11"},{"attributeId":"3","value":"256GB"},{"attributeId":"4","value":"98%"},{"attributeId":"5","value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift."},{"attributeId":"6","value":"Palestine, Gaza"}],"type":"array","items":{"$ref":"#/components/schemas/ProductAttributeDto"}}},"required":["title","categoryId","condition","price","attributes"]},"CreateDraftProductDto":{"type":"object","properties":{"title":{"type":"string","example":"iPhone 11 Pro Max"},"categoryId":{"type":"string","example":"1","description":"The ID of the category"},"condition":{"type":"string","enum":["new","like_new","good","fair","poor"],"example":"new"},"price":{"type":"number","example":150.5},"isNegotiable":{"type":"boolean","example":false},"images":{"type":"array","items":{"type":"string","format":"binary"},"description":"Product images (max 6)"},"attributes":{"type":"array","items":{"$ref":"#/components/schemas/ProductAttributeDto"}}},"required":["title","categoryId","condition","price"]},"UpdateProductDto":{"type":"object","properties":{"title":{"type":"string","example":"iPhone 11 Pro Max"},"categoryId":{"type":"string","example":"1","description":"The ID of the category"},"condition":{"type":"string","enum":["new","like_new","good","fair","poor"],"example":"new"},"price":{"type":"number","example":150.5},"isNegotiable":{"type":"boolean","example":false},"attributes":{"example":[{"attributeId":"1","value":"Apple"},{"attributeId":"2","value":"iphone 11"},{"attributeId":"3","value":"256GB"},{"attributeId":"4","value":"98%"},{"attributeId":"5","value":"This is my phone and I want to sell it; I haven't used it because I received another phone as a gift."},{"attributeId":"6","value":"Palestine, Gaza"}],"type":"array","items":{"$ref":"#/components/schemas/ProductAttributeDto"}}}},"AdminDecision":{"type":"string","enum":["active","rejected"],"description":"Admin decision to approve (active) or reject the product"},"AdminDecisionDto":{"type":"object","properties":{"decision":{"description":"Admin decision to approve (active) or reject the product","example":"active","allOf":[{"$ref":"#/components/schemas/AdminDecision"}]}},"required":["decision"]},"UpdateProfileDto":{"type":"object","properties":{"bio":{"type":"string","description":"User biography","example":"I love buying and selling electronics"},"location":{"type":"string","description":"User location","example":"Cairo, Egypt"},"countryId":{"type":"number","description":"Country ID","example":1},"latitude":{"type":"number","description":"location latitude","example":1},"longitude":{"type":"number","description":"location longitude","example":1},"avatar":{"type":"string","format":"binary","description":"image file for avatar upload (jpg, jpeg, png, gif, webp)"}}},"ProfileResponseDto":{"type":"object","properties":{"id":{"type":"number","example":1,"description":"Profile ID"},"userId":{"type":"number","example":1,"description":"User ID"},"bio":{"type":"string","nullable":true,"description":"User biography"},"location":{"type":"string","nullable":true,"description":"User location"},"avatarAssetId":{"type":"number","nullable":true,"description":"Avatar asset ID"},"countryId":{"type":"number","nullable":true,"description":"Country ID"},"createdAt":{"type":"string","format":"date-time","description":"Created timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Last updated timestamp"}},"required":["id","userId","createdAt","updatedAt"]},"AddToWishlistDto":{"type":"object","properties":{"productId":{"type":"string","example":"1","description":"The ID of the product to add to wishlist"}},"required":["productId"]}}}}